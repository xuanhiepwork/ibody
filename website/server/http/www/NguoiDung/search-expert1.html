<!-- bỏ -->
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tìm kiếm chuyên gia</title>
  <link rel="stylesheet" href="..//CSS/NguoiDung/search-expert.css" />
  <link rel="stylesheet" href="..//CSS/index.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <header class="header">
    <div class="logo">
      <span class="symbol">♂♀</span>
      <span class="brand">ibody</span>
    </div>

    <button id="menu-toggle" class="menu-toggle">☰</button>

    <nav class="nav">
      <a href="..//"><i class="fas fa-home"></i> Trang chủ</a>
      <a href="https://www.facebook.com/groups/1717452315821331"><i class="fab fa-facebook"></i> Cộng Đồng</a>
      <a href="search-expert.html" class="active"><i class="fas fa-user-friends"></i> Tư vấn</a>
      <a href="lich-hen-user.html"><i class="fas fa-calendar-check"></i> Lịch hẹn</a>
      <a href="lichSuGoi.html"><i class="fas fa-history"></i> Lịch sử</a>
      <a href="dang-ky-goi.html"><i class="fas fa-box-open"></i> Gói tư vấn</a>
      <a href="#" id="loginLink" onclick="openAuthModal()"><i class="fas fa-sign-in-alt"></i> Đăng nhập/Đăng ký</a>
      <div class="user-menu" id="userMenu" style="display: none;">
        <div class="user-button" onclick="toggleUserDropdown()">
          <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Avatar" class="avatar">
          <span id="usernameDisplay"></span>
        </div>
        <div class="user-dropdown" id="userDropdown">
          <a href="../profile.html"><i class="fas fa-user"></i> Trang cá nhân</a>
          <a href="settings-upgrade.html"><i class="fas fa-arrow-up"></i> Nâng cấp</a>
          <a href="..//tracnghiem.html"><i class="fas fa-clipboard-question"></i> Trắc nghiệm</a>
          <a href="ho-tro-user.html"><i class="fas fa-headset"></i> Hỗ trợ</a>
          <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
        </div>
      </div>
    </nav>
  </header>

  <div class="expert-search-layout">
    <div class="expert-list-area">
      <div id="expertList" class="expert-list-grid"></div>
    </div>

    <div class="search-panel">
      <h3><i class="fas fa-search"></i> Tìm chuyên gia</h3>
      <label for="searchInput"><i class="fas fa-keyboard"></i> Từ khoá</label>
      <input type="text" id="searchInput" placeholder="Nhập tên hoặc chuyên môn..." />

      <label for="specialtyFilter"><i class="fas fa-user-tag"></i> Chuyên môn</label>
      <select id="specialtyFilter">
        <option value="">Tất cả chuyên môn</option>
      </select>

      <label for="availabilityFilter"><i class="fas fa-calendar-alt"></i> Thời gian rảnh</label>
      <select id="availabilityFilter">
        <option value="">Tất cả</option>
        <option value="1">Thứ 2</option>
        <option value="2">Thứ 3</option>
        <option value="3">Thứ 4</option>
        <option value="4">Thứ 5</option>
        <option value="5">Thứ 6</option>
        <option value="6">Thứ 7</option>
        <option value="0">Chủ nhật</option>
      </select>

      <label for="experienceFilter"><i class="fas fa-briefcase"></i> Kinh nghiệm</label>
      <select id="experienceFilter">
        <option value="">Tất cả</option>
        <option value="9">Dưới 10 năm</option>
        <option value="10">Trên 10 năm</option>
      </select>

      <button id="searchBtn"><i class="fas fa-search"></i> Tìm chuyên gia</button>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-about">
        <h4>Về chúng tôi</h4>
        <p>IBODY là dự án kết nối học sinh với chuyên gia tâm lý, giúp các em hiểu và phát triển bản thân một cách lành mạnh.</p>
      </div>
      <div class="footer-contact">
        <h4>Liên hệ</h4>
        <p>Email: xuanhiep.ht4f@gmail.com</p>
        <p>Hotline: 036.382.4905</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 ibody. All rights reserved.</p>
    </div>
  </footer>

  <script>
    const mockExperts = [
      {
        id: 1,
        name: "Nguyễn Thị Lan Anh",
        avatar: "../../picture/NhuQuynh.png",
        specialty: "Tâm lý học đường",
        specialties: ["Tâm lý học đường", "Rối loạn lo âu ở trẻ", "Tư vấn hướng nghiệp"],
        experience: 8,
        availability: [1, 3, 5],
        description: "Chuyên gia Nguyễn Thị Lan Anh có 8 năm kinh nghiệm làm việc với học sinh, sinh viên, giúp các em giải quyết các vấn đề học tập, mối quan hệ và định hướng tương lai.",
        hourlyRate: 500000,
        education: "Thạc sĩ Tâm lý học, Đại học Khoa học Xã hội và Nhân văn"
      },
      {
        id: 2,
        name: "Trần Minh Đức",
        avatar: "https://media.licdn.com/dms/image/v2/D5603AQEXqOp4DDLoEw/profile-displayphoto-shrink_800_800/B56ZSNP0gjHoAc-/0/1737536523054?e=1753920000&v=beta&t=_hOIPzbzw7qg_EciMC9hG29sx6aGyJJGvuzwZ14fVoE",
        specialty: "Trầm cảm và Rối loạn lo âu",
        specialties: ["Trầm cảm", "Rối loạn lo âu", "Stress", "Tư vấn cá nhân"],
        experience: 2,
        availability: [2, 4, 6, 0],
        description: "Tiến sĩ Trần Minh Đức chuyên sâu về trị liệu các vấn đề liên quan đến trầm cảm, rối loạn lo âu ở người trưởng thành.",
        hourlyRate: 700000,
        education: "Tiến sĩ Tâm lý lâm sàng, Đại học Y Dược TP.HCM"
      },
      {
        id: 3,
        name: "Lê Minh Nguyệt",
        avatar: "../../picture/MinhNguyet.png",
        specialty: "Tư vấn Hôn nhân và Gia đình",
        specialties: ["Tư vấn Hôn nhân", "Tư vấn Gia đình", "Mâu thuẫn thế hệ", "Nuôi dạy con cái"],
        experience: 5,
        availability: [1, 2, 3, 4, 5],
        description: "Chuyên gia Lê Bảo Hân có kinh nghiệm trong lĩnh vực tư vấn hôn nhân và gia đình, hỗ trợ các cặp đôi và gia đình xây dựng mối quan hệ bền vững.",
        hourlyRate: 650000,
        education: "Thạc sĩ Tâm lý học Gia đình, Đại học Sư phạm Hà Nội"
      },
    ];

    function populateSpecialtyFilter(experts) {
      const specialtyFilter = document.getElementById('specialtyFilter');
      const allSpecialties = new Set();
      experts.forEach(expert => {
        if (Array.isArray(expert.specialties)) {
          expert.specialties.forEach(spec => allSpecialties.add(spec.trim()));
        } else if (expert.specialty) {
          allSpecialties.add(expert.specialty.trim());
        }
      });
      allSpecialties.forEach(specialty => {
        const option = document.createElement('option');
        option.value = specialty;
        option.textContent = specialty;
        specialtyFilter.appendChild(option);
      });
    }

    function renderExperts(expertsToRender) {
      const expertListDiv = document.getElementById('expertList');
      expertListDiv.innerHTML = '';
      if (expertsToRender.length === 0) {
        expertListDiv.innerHTML = '<p>Không tìm thấy chuyên gia phù hợp.</p>';
        return;
      }

      expertsToRender.forEach(expert => {
        const expertCard = document.createElement('div');
        expertCard.className = 'expert-card';
        expertCard.innerHTML = `
          <img src="${expert.avatar}" alt="${expert.name}" class="expert-avatar">
          <h4>${expert.name}</h4>
          <p><i class="fas fa-user-tag"></i> <strong>Chuyên môn:</strong> ${expert.specialty}</p>
          <p><i class="fas fa-graduation-cap"></i> <strong>Học vấn:</strong> ${expert.education}</p>
          <p><i class="fas fa-briefcase"></i> <strong>Kinh nghiệm:</strong> ${expert.experience} năm</p>
          <p><i class="fas fa-money-bill-wave"></i> <strong>Giá/h:</strong> ${expert.hourlyRate.toLocaleString()} đ</p>
          <p class="expert-description">${expert.description.substring(0, 100)}...</p>
          <button onclick="viewExpertProfile(${expert.id})"><i class="fas fa-eye"></i> Xem chi tiết</button>
        `;
        expertListDiv.appendChild(expertCard);
      });
    }

    function viewExpertProfile(expertId) {
      alert(`Chức năng xem chi tiết chuyên gia ID ${expertId} sẽ được phát triển.`);
    }

    document.addEventListener('DOMContentLoaded', () => {
      renderExperts(mockExperts);
      populateSpecialtyFilter(mockExperts);

      const searchInput = document.getElementById('searchInput');
      const specialtyFilter = document.getElementById('specialtyFilter');
      const availabilityFilter = document.getElementById('availabilityFilter');
      const experienceFilter = document.getElementById('experienceFilter');
      const searchBtn = document.getElementById('searchBtn');

      const filterExperts = () => {
        const searchTerm = searchInput.value.toLowerCase();
        const selectedSpecialty = specialtyFilter.value;
        const selectedAvailability = availabilityFilter.value;
        const selectedExperience = experienceFilter.value;

        const filteredResults = mockExperts.filter(expert => {
          const matchesSearch = expert.name.toLowerCase().includes(searchTerm) ||
            expert.specialty.toLowerCase().includes(searchTerm) ||
            (expert.specialties && expert.specialties.some(s => s.toLowerCase().includes(searchTerm)));

          const matchesSpecialty = selectedSpecialty === "" ||
            (expert.specialties && expert.specialties.includes(selectedSpecialty)) ||
            expert.specialty === selectedSpecialty;

          const matchesAvailability = selectedAvailability === "" || expert.availability.includes(parseInt(selectedAvailability));

          const matchesExperience = selectedExperience === "" ||
            (selectedExperience === "9" && expert.experience < 10) ||
            (selectedExperience === "10" && expert.experience >= 10);

          return matchesSearch && matchesSpecialty && matchesAvailability && matchesExperience;
        });

        renderExperts(filteredResults);
      };

      searchBtn.addEventListener('click', filterExperts);
      searchInput.addEventListener('keyup', filterExperts);
      specialtyFilter.addEventListener('change', filterExperts);
      availabilityFilter.addEventListener('change', filterExperts);
      experienceFilter.addEventListener('change', filterExperts);

      window.openAuthModal = () => alert('Đăng nhập/Đăng ký sẽ được phát triển!');
      window.toggleUserDropdown = () => {
        const dropdown = document.getElementById('userDropdown');
        dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
      };
      window.logout = () => alert('Chức năng đăng xuất sẽ được phát triển!');

      const isLoggedIn = localStorage.getItem('isLoggedIn');
      const username = localStorage.getItem('username');

      if (isLoggedIn === 'true' && username) {
        document.getElementById('loginLink').style.display = 'none';
        document.getElementById('userMenu').style.display = 'block';
        document.getElementById('usernameDisplay').textContent = username;
      }

      const menuToggle = document.getElementById('menu-toggle');
      const nav = document.querySelector('.nav');
      menuToggle.addEventListener('click', () => nav.classList.toggle('nav-active'));
    });
  </script>
</body>
</html>
